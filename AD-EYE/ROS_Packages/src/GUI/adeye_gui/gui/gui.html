<!DOCTYPE html>
<html>
  <head>
    <title>AD-EYE</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="gui.css">
    <script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
    <script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
    <script type="text/javascript" src="gui.js"></script>
    <!-- define on/off styles -->
    <style type="text/css">
      .on  
      { background:#699b2c;
        border:none; 
      }
      .off 
      { 
        background: gray;
        border:none;
      }
    </style>
  </head>

  <body onload="getTopics(); create_forms();"> 
      
    <!-- header of the page -->
    <header class="card">
        <h1>AD-EYE Graphical Interface</h1>
        <p style="font-style: italic;">Connection status: <span id="status"></span></p>
    </header>

    <!-- main content -->
    <main>
      <div class="container">
      <div class="row">

        <!-- card for linear velocity -->
        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Linear Velocity</h2>
            <div class="gauge_velocity">
              <div class="gauge_velocity_body">
                <div class="gauge_velocity_fill"></div>
                <div class="gauge_velocity_cover"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- card for linear acceleration -->
        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box"> 
            <h2 class="text-center">Linear Acceleration</h2>
            <div class="gauge_acceleration">
              <div class="gauge_acceleration_body">
                <div class="gauge_acceleration_fill"></div>
                <div class="gauge_acceleration_cover"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- card for control channel  -->
        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Control Channel</h2>
            <div class="btn-group" style="height:80px;width:320px;"> 
              <button  id="00" type="button" value="off" class="channel" onclick="toggleState_OnClick(this)">Nominal</button>
              <button id="01" type="button" value="off" class="channel" onclick="toggleState_OnClick(this)">Safety</button>
            </div> 
          </div>
        </div>

        <!-- card for manager state -->
        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Manager State</h2>
            <p>Current State : <span id="state"></span></p>
            <button type="button" value="off" class="manager" onclick="toggleStateinitial_OnClick(this)">Initial Checks</button>&nbsp;&nbsp;&nbsp; <span id="initial"></span>
            <button type="button" value="off" class="manager" onclick="toggleStateactivation_OnClick(this)">Activation Request</button>&nbsp;&nbsp;&nbsp; <span id="activation"></span>
            <button type="button" value="off" class="manager" onclick="toggleStatefault_OnClick(this)">Fault</button>&nbsp;&nbsp;&nbsp; <span id="fault"></span>
          </div>
        </div>

        <!-- card for tracked objects -->
        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Tracked Objects</h2>
            <p>Tracked object: <span id="track"></span></p>
            <p>X: <span id="x"></span></p>
            <p>Y: <span id="y"></span></p>
            <p>Z: <span id="z"></span></p>
          </div>
        </div>

        <!-- card for behaviour state -->
        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Behavior State</h2>
            <p>State: <span id="behavior"></span></p>
          </div>
        </div>

        <!-- card for features -->
        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Features</h2>
            <button id="0" type="button" value="off" class="features " onclick="toggleFeatureState_OnClick(this)">Recording</button>
            <button id="1" type="button" value="off" class="features" onclick="toggleFeatureState_OnClick(this)"> Map</button>
            <button id="2" type="button" value="off" class="features"  onclick="toggleFeatureState_OnClick(this)">Sensing</button>
            <button id="3" type="button" value="off" class="features"  onclick="toggleFeatureState_OnClick(this)">Localization</button>
            <button id="4" type="button" value="off" class="features" onclick="toggleFeatureState_OnClick(this)">Fake Localization</button>
            <button id="5" type="button" value="off" class="features"  onclick="toggleFeatureState_OnClick(this)">Detection</button>
            <button id="6" type="button" value="off" class="features"  onclick="toggleFeatureState_OnClick(this)">Misson Planning</button>
            <button id="7" type="button" value="off" class="features" onclick="toggleFeatureState_OnClick(this)">Motion Planning</button>
            <button id="8" type="button" value="off" class="features"  onclick="toggleFeatureState_OnClick(this)">Switch</button>
            <button id="9" type="button" value="off" class="features"  onclick="toggleFeatureState_OnClick(this)">SSMP</button>
            <button id="10" type="button" value="off" class="features" onclick="toggleFeatureState_OnClick(this)">Rviz</button>
            <button id="11" type="button" value="off" class="features" onclick="toggleFeatureState_OnClick(this)">Experiment Recording</button>
          </div>
        </div>

        <!-- card for fault injection -->
        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Fault Injection</h2>
            <div id="form_display"></div>
            <div id="x1"></div>

            <!----gnss---->
            <div id="gnss_div" style="display:inline-flex">
              <button name="gnss" type="button" value="off" class="fault_injection" onclick="faultInjection_OnClick(this)">GNSS</button>
              <input id="gnss_input" type="text" value="" placeholder="State"></input> <!-- name="gnss" class="state" -->
            </div>
            <div class="forms">
              <form id="gnss_form" name="gnss" style="display:none;">
                <!-- <label style="text-align:center; font-size: x-large;">Gnss_Form</label> -->
                <label>State</label>
                <select id="gnss_state">
                  <option value="0.0" >off</option>
                  <option value="1.0">Gaussian noise</option>
                </select>
                <label>noise_variance</label>
                <input type="text" value="1.0" ></input>
                <input id="gnss_send" type="button" value="send" onclick="gnss_parameter_values()"></input>
              </form>
            </div> 
            <!----gnss---->

            <!----lidar---->
            <div id="lidar1_div" style="display:inline-flex">
              <button name="lidar1" type="button" value="off" class="fault_injection" onclick="faultInjection_OnClick(this)">Lidar 1</button>&nbsp;&nbsp;
              <input id="lidar1_input" type="text"  value="" placeholder="State"></input><!-- class="state" -->
            </div>
            <div class="forms">
              <form id="lidar1_form" name="lidar1" style="display:none">
                <!-- <label id="Lidar1_form" style="text-align:center; font-size: x-large;">Lidar1_Form</label> -->
                <label>State</label>
                <select id="lidar_state">
                  <option value="0" >off</option>
                  <option value="1">random</option>
                  <option value="2">rain</option>
                </select>
                <label>random/range_variance</label>
                <input type="text" value="0.0001"></input>
                <label>random/theta_variance</label>
                <input type="text" value="0.0001"></input>
                <label>rain/rain_intensity</label>
                <input type="text" value="7.5"></input>
                <label>rain/a</label>
                <input type="text" value="0.01"></input>
                <label>rain/b</label>
                <input type="text" value="0.6"></input>
                <label>rain/reflectivity</label>
                <input type="text" min="0" max="0" value="0.9"></input>
                <label>rain/max_range</label>
                <input type="text" value="100"></input>
                <input id="lidar_send" type="button" value="send" onclick="gnss_parameter_values()"></input>
              </form>
            </div>
            
            <div id="lidar2_div" style="display:inline-flex">
              <button name="lidar2" type="button" value="off" class="fault_injection" onclick="faultInjection_OnClick(this)">Lidar 2</button>&nbsp;&nbsp;
              <input name="lidar2_input" type="text" class="state" value="" placeholder="State"></input>
            </div>
            <div class="forms">
              <form id="lidar2_form" name="lidar2" style="display:none"></form>
            </div>
            
            
            <div id="lidar3_div" style="display:inline-flex">
              <button name="lidar3" type="button" value="off" class="fault_injection" onclick="faultInjection_OnClick(this)">Lidar 3</button>&nbsp;&nbsp;
              <input name="lidar3" type="text" class="state" value="" placeholder="State"></input>
            </div>
            <div class="forms">
              <form id="lidar3_form" name="lidar3" style="display:none"></form>
            </div>
            
            <div id="lidar4_div" style="display:inline-flex">
              <button name="lidar4" type="button" value="off" class="fault_injection" onclick="faultInjection_OnClick(this)">Lidar 4</button>&nbsp;&nbsp;
              <input name="lidar4" type="text" class="state" value="" placeholder="State"></input>
            </div>
            <div class="forms">
              <form id="lidar4_form" name="lidar4" style="display:none"></form>
            </div>
            <!----lidar---->

            <!----radar---->
            <div id="radar_div" style="display:inline-flex">
              <button name="radar" type="button" value="off" class="fault_injection" onclick="faultInjection_OnClick(this)">Radar</button>&nbsp;&nbsp;
              <input name="radar" type="text" class="state" value="" placeholder="State"></input>
            </div>
            <div class="forms">
              <form id="radar_form" name="radar" style="display:none">
                <label>State</label>
                <select id="radar_state">
                  <option value="0" >off</option>
                  <option value="1">Gaussian noise</option>
                </select>
                <label>range_variance</label>
                <input type="text" value="1"></input>
                <label>theta_variance</label>
                <input type="text" value="1"></input>
                <label>phi_variance</label>
                <input type="text" value="1"></input>
                <input id="lidar_send" type="button" value="send" onclick="gnss_parameter_values()"></input>
              </form>
            </div>
            <!----radar---->

            <!----camera---->
            <div id="camera_1_div" style="display:inline-flex">
              <button name="camera1" type="button" value="off" class="fault_injection" onclick="faultInjection_OnClick(this)">Camera 1</button>&nbsp;&nbsp;
              <input name="camera_1" type="text" class="state" value="" placeholder="State"></input>
            </div>
            <div class="forms">
              <form id="camera1_form" name="camera1" style="display:none">
                <label>State</label>
                <select id="camera_state">
                  <option value="0" >off</option>
                  <option value="1">colored patch</option>
                </select>
                <label>patch/start_x</label>
                <input type="text" value="200"></input>
                <label>path/start_y</label>
                <input type="text" value="100"></input>
                <label>patch/size_x</label>
                <input type="text" value="100"></input>
                <label>patch/size_y</label>
                <input type="text" value="150"></input>
                <label>patch/R</label>
                <input type="text" value="0"></input>
                <label>patch/G</label>
                <input type="text" value="0"></input>
                <label>patch/B</label>
                <input type="text" value="0"></input>
                <input id="camera_send" type="button" value="send" onclick="gnss_parameter_values()"></input>
              </form>
            </div>
            
            <div id="camera_2_div" style="display:inline-flex">
              <button name="camera2" type="button" value="off" class="fault_injection" onclick="faultInjection_OnClick(this)">Camera 2</button>&nbsp;&nbsp;
              <input name="camera_2" type="text" class="state" value="" placeholder="State"></input>
            </div>
            <div class="forms">
              <form id="camera2_form" name="camera2" style="display:none"></form>
            </div>
            
            <div id="tl_camera_div" style="display:inline-flex">
              <button name="tl_camera" type="button" value="off" class="fault_injection" onclick="faultInjection_OnClick(this)">TL Camera</button>&nbsp;&nbsp;
              <input name="tl_camera" type="text" class="state" value="" placeholder="State"></input>
            </div>
            <div class="forms">
              <form id="tl_camera_form" name="tl_camera" style="display:none"></form>
            </div>
            <!----camera---->
				  </div>
        </div>
        
         <!-- card for ROS topics list -->
         <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Ros Topics List</h2>
              <p> Topic &nbsp;&nbsp;&nbsp;<select id="select_topic"> </select></p>
              <span><label id="topic_data">Topic Data</label>&nbsp;&nbsp;&nbsp;<input id="topic_data_textbox" type="text" name="topic_data" value="" placeholder="Topic_Data"></input></span>
          </div>
        </div>

        <!-- card for camera -->
        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Camera 1</h2>
            <div id="b"></div>
             <canvas id="camera1_canvas" width="960" height="720"></canvas>
					</div>
        </div>

        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">Camera 2</h2>
             <canvas id="camera2_canvas" width="960" height="720"></canvas>
					</div>
        </div>

        <div class="col-md-4 col-sm-12">
          <div draggable="true" class="box">
            <h2 class="text-center">TL Camera</h2>
             <canvas id="tl_camera_canvas" width="960" height="720"></canvas>
					</div>
        </div>
      </div>
      </div>
	  </main>

    <!-- footer -->
	  <footer class="footer mt-auto bg-dark text-light">
			<h5 style="text-align: center;">AD-EYE <a href="https://www.adeye.se/">(adeye.se)</a> Platform for Automated Driving Systems</h5>
    </footer>
    <!-- <script>
      var canvasElement = document.getElementById("myCanvas");
      var context = canvasElement.getContext("2d"); 
      context.fillStyle = "yellow";
      context.fillRect(20, 20, 128, 128);
      context.fillStyle = "red";
      context.fillRect(150, 20, 128, 128);
      context.fillStyle = "green";
      context.fillRect(20, 150, 128, 128);
      context.fillStyle = "blue"; 
      context.fillRect(150, 150, 128, 128);
      
      </script>   -->
     
  </body>
</html>

