<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>AD-EYE</title>
           <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
       	 crossorigin="anonymous">
       <script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
       <meta charset="utf-8">
       <script>

               var ros = new ROSLIB.Ros({
                 url : 'ws://localhost:9090'
               });

               ros.on('connection', function() {
                 document.getElementById("status").innerHTML = "Connected";
               });

               ros.on('error', function(error) {
                 document.getElementById("status").innerHTML = "Error";
               });

               ros.on('close', function() {
                 document.getElementById("status").innerHTML = "Closed";
               });

               var data_listener = new ROSLIB.Topic({
                 ros : ros,
                 name : '/tracked_objects',
                 messageType : 'autoware_msgs/DetectedObjectArray'
               });

               data_listener.subscribe(function(message) {
                console.log('Received message on ' + data_listener.name + ': ' + message.objects[0].label[2]);
                 document.getElementById("acc").innerHTML = message.objects[0].pose.position.x;
                    let object=[];
                    var k=0;

                    for (var i = 0; i < message.objects.length; i++) {
                        for (var j = 0; j < message.objects[i].label.length; j++) {
                            object[k]=message.objects[i].label[j];
                            k++;

                    }

                    s = object.join("")
                    console.log(s)
                    console.log(':')
                    console.log(message.objects[0].pose.position.x)
                    console.log(message.objects[0].pose.position.y)
                    console.log(message.objects[0].pose.position.z)
                    console.log(':')
                    object.splice(0, object.length);
                    }

            });


       </script>
   </head>
   <body class="d-flex flex-column h-100">
   	<!-- header of the page -->
   	<header class="header">
   		<div class="container">
   			<div class="jumbotron text-center">
   				<h1>AD-EYE Graphical Interface</h1>
   				<p>Connection status: <span id="status"></span></p>
                <p>Last /txt_msg received_data: <span id="acc"></span></p>
   			</div>
   		</div>
   	</header>

   	<!-- footer -->
   	<footer class="footer mt-auto bg-dark text-light">
   		<div class="container">
   			<h5>page ends here! But work inprogress</h5>
   		</div>
   	</footer>
   </body>


   </html>
