<!DOCTYPE html>
<html>
<head>

    <title>AD-EYE</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    	 crossorigin="anonymous">
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="gauge.css">

        <script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
        <script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
        <script type="text/javascript" type="text/javascript">
//------------------Connection with the bridge-------------------
                    var ros = new ROSLIB.Ros({
                      url : 'ws://localhost:9090'
                    });

                    ros.on('connection', function() {
                      document.getElementById("status").innerHTML = "Connected";
                    });

                    ros.on('error', function(error) {
                      document.getElementById("status").innerHTML = "Error";
                    });

                    ros.on('close', function() {
                      document.getElementById("status").innerHTML = "Closed";
                    });
//------------------Connection with the bridge-------------------

//-------------------linear velocity----------------
                //listen to the topic
                    var vel_listener = new ROSLIB.Topic({
                      ros : ros,
                      name : '/vehicle_cmd',
                      messageType : 'autoware_msgs/VehicleCmd'
                    });
                    //subscribing to the topic
                    vel_listener.subscribe(function(message) {


                     var val = message.ctrl_cmd.linear_velocity;
                     const gaugeElement = document.querySelector(".gauge");
                     val = val / 10; //shifting one decimal
                        //function to set values of the gauge
                         function setGaugeValue(gauge, value) {
                             //safety check for the values within the range
                           if (value < 0 || value > 1) {
                             return;
                           }
                           //making the turn over the gauge body
                           gauge.querySelector(".gauge__fill").style.transform = `rotate(${value / 3}turn)`;
                           value = (value * 180) / 5;// to convert the value to km/hr from m/s
                           //printing the velocity value
                           gauge.querySelector(".gauge__cover").textContent = `${Math.round(value )}km/hr`;
                         }
                         // passing the value to the function
                     setGaugeValue(gaugeElement, val);
                     });
//-------------------linear velocity----------------

//-------------------linear acceleration----------------
                    //listen to the topic
                        var acc_listener = new ROSLIB.Topic({
                          ros : ros,
                          name : '/vehicle_cmd',
                          messageType : 'autoware_msgs/VehicleCmd'
                        });
                        //subscribing to the topic
                        acc_listener.subscribe(function(message) {


                         var val_a = message.ctrl_cmd.linear_acceleration;
                        const gaugeElement_a = document.querySelector(".gauge_a");
                        val_a = val_a / 10; //shifting one decimal
                        //function to set values of the gauge
                         function setGaugeValue_a(gauge_a, value_a) {
                             //safety check for the values within the range
                           if (value_a < 0 || value_a > 1) {
                             return;
                           }
                           //making the turn over the gauge body
                           gauge_a.querySelector(".gauge_a__fill").style.transform = `rotate(${value_a / 4}turn)`;
                            //printing the acceleration value
                           gauge_a.querySelector(".gauge_a__cover").textContent = `${Math.round(value_a*10 )}m/s2`;
                         }
                         // passing the value to the function
                         setGaugeValue_a(gaugeElement_a, val_a);
                         });
//-------------------linear acceleration----------------

//-------------------safety Vs autoware ----------------
                    //listen to the topic
                     var data_listener = new ROSLIB.Topic({
                       ros : ros,
                       name : '/switchCommand',
                       messageType : 'std_msgs/Int32'
                     });
                     //subscribing to the topic
                     data_listener.subscribe(function(message) {


                      var val_data = message.data;
                      var num =val_data;
                    // array for two leds
                      var strColorPairs = Array(
                                                  {'position' : 0, 'color' : 'green'},
                                                  {'position' : 1, 'color' : 'red'}
                                              );

                      var position = checkPosition(num);
                      colorBox(position);
                      //function to change the color of leds and reseting it to gray when not in use
                       function colorBox(position)
                          {
                              var divList = document.getElementsByClassName('ratingBox');
                              var i, n = divList.length;
                              curContent = divList[position].id;
                              for (i=0; i<n; i++)
                              {

                                  for (j=0; j<strColorPairs.length; j++)
                                  {
                                      if (strColorPairs[j].position == curContent){
                                          divList[curContent].style.backgroundColor  = strColorPairs[j].color;
                                          }
                                      else {divList[i].style.backgroundColor  = 'gray'}
                                  }
                              }
                          }
                          //function to assign the position in the array base on the data value recived
                      function checkPosition(num){
                       var position;
                         if((num==0))
                           {
                            position=0;
                           }
                           else if((num==1))
                           {
                            position=1;
                           }

                           return position;
                       }
                    });
//-------------------safety Vs autoware ----------------

//-------------------tracked object ----------------
                    var track_listener = new ROSLIB.Topic({
                      ros : ros,
                      name : '/tracked_objects',
                      messageType : 'autoware_msgs/DetectedObjectArray'
                    });

                    track_listener.subscribe(function(message) {

                         let object=[];
                         var k=0;

                         for (var i = 0; i < message.objects.length; i++) {
                             for (var j = 0; j < message.objects[i].label.length; j++) {
                                 object[k]=message.objects[i].label[j];
                                 k++;

                         }
                         s = object.join("")
                         document.getElementById("track").innerHTML = s;
                         x = message.objects[0].pose.position.x;
                         document.getElementById("x").innerHTML = x;
                         y = message.objects[0].pose.position.y;
                         document.getElementById("y").innerHTML = y;
                         z = message.objects[0].pose.position.z
                         document.getElementById("z").innerHTML = z;
                         object.splice(0, object.length);
                         }

                    });
//-------------------tracked object ----------------

//---------------------behaviour state--------------
                    var beh_listener = new ROSLIB.Topic({
                      ros : ros,
                      name : '/behavior_state',
                      messageType : 'visualization_msgs/MarkerArray'
                    });

                    beh_listener.subscribe(function(message) {

                         let marker=[];
                         var k=0;

                         for (var i = 0; i < message.markers.length; i++) {
                             for (var j = 0; j < message.markers[i].text.length; j++) {
                                 marker[k]=message.markers[i].text[j];
                                 k++;

                         }

                         t = marker.join("")
                         document.getElementById("beh").innerHTML = t;
                         marker.splice(0, marker.length);
                     }
                         });
//--------------------behaviour state---------------
//--------------------Toggle state---------------
                    function toggleState(item){
                       if(item.className == "on") {
                           item.className="off";
                          var dataToggleOn = new ROSLIB.Topic({
                             ros : ros,
                             name : '/switchCommand',
                             messageType : 'std_msgs/Int32'
                           });

                          var dataOn = new ROSLIB.Message({
                             data : 1
                           });
                        dataToggleOn.publish(dataOn);
                       } else {
                           item.className="on";
                          var dataToggleOff = new ROSLIB.Topic({
                             ros : ros,
                             name : '/switchCommand',
                             messageType : 'std_msgs/Int32'
                           });

                          var dataOff = new ROSLIB.Message({
                             data : 0
                           });
                        dataToggleOff.publish(dataOff);
                       }
                    }
//--------------------Toggle state---------------
//-------------------- state Change---------------
                function toggleStateinitial(ini){
                   if(ini.className == "on") {
                       ini.className="off";
                      var initialToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/initial_checks',
                         messageType : 'bool'
                       });

                      var initialOn = new ROSLIB.Message({
                         data : 1
                       });
                    initialToggleOn.publish(initialOn);
                   } else {
                       ini.className="on";
                      var initialToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/initial_checks',
                         messageType : 'bool'
                       });

                      var initialOff = new ROSLIB.Message({
                         data : 0
                       });
                    initialToggleOff.publish(initialOff);
                   }
                }

                function toggleStateactivation(act){
                   if(act.className == "on") {
                       act.className="off";
                      var activationToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/activation_request',
                         messageType : 'bool'
                       });

                      var activationOn = new ROSLIB.Message({
                         data : 1
                       });
                    activationToggleOn.publish(activationOn);
                   } else {
                       act.className="on";
                      var activationToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/activation_request',
                         messageType : 'bool'
                       });

                      var acivationOff = new ROSLIB.Message({
                         data : 0
                       });
                    activationToggleOff.publish(activationOff);
                   }
                }

                function toggleStatefault(flt){
                   if(flt.className == "on") {
                       flt.className="off";
                      var faultToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/fault',
                         messageType : 'bool'
                       });

                      var fautOn = new ROSLIB.Message({
                         data : 1
                       });
                    faultToggleOn.publish(faultOn);
                   } else {
                       flt.className="on";
                      var faultToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/fault',
                         messageType : 'bool'
                       });

                      var faultOff = new ROSLIB.Message({
                         data : 0
                       });
                    faultToggleOff.publish(faultOff);
                   }
                }
//-------------------- state Change---------------

//-------------------Manager State----------------
                    //listen to the topic
                     var manager_listener = new ROSLIB.Topic({
                       ros : ros,
                       name : '/manager/state',
                       messageType : 'bool'
                     });

                     //subscribing to the topic
                    manager_listener.subscribe(function(message) {

                        var num = message.data;
                        if((num==0))
                          {
                              var initial = "Initiaizing";
                              document.getElementById("state").innerHTML = initial;
                          }
                          else if((num==1))
                          {
                              var enabled = "Enabled";
                              document.getElementById("state").innerHTML = Enabled;
                          }
                          else if((num==2))
                          {
                              var engaged = "Engaged";
                              document.getElementById("state").innerHTML = engaged;
                          }
                          else if((num==3))
                          {
                              var fault = "Fault";
                              document.getElementById("state").innerHTML = fault;
                          }

                    });


//--------------------Manager State--------------




//-------------------- Feature Change---------------
                function toggleStaterec(rec){
                   if(rec.className == "on") {
                       rec.className="off";
                      var recToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var recOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              RECORDING : 1
                          },
                          ENABLED_STATE : {
                              RECORDING : 1
                          },
                          ENGAGED_STATE : {
                              RECORDING : 1
                          },
                          FAULT_STATE : {
                              RECORDING : 1
                          }
                       });
                    recToggleOn.publish(recOn);
                   } else {
                       rec.className="on";
                      var recToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var recOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              RECORDING : 0
                          },
                          ENABLED_STATE : {
                              RECORDING : 0
                          },
                          ENGAGED_STATE : {
                              RECORDING : 0
                          },
                          FAULT_STATE : {
                              RECORDING : 0
                          }
                       });
                    recToggleOff.publish(recOff);
                   }
                }
                function toggleStatemap(map){
                   if(map.className == "on") {
                       map.className="off";
                      var mapToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var mapOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              MAP : 1
                          },
                          ENABLED_STATE : {
                              MAP : 1
                          },
                          ENGAGED_STATE : {
                              MAP : 1
                          },
                          FAULT_STATE : {
                              MAP : 1
                          }
                       });
                    mapToggleOn.publish(mapOn);
                   } else {
                       map.className="on";
                      var mapToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var mapOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              MAP : 0
                          },
                          ENABLED_STATE : {
                              MAP : 0
                          },
                          ENGAGED_STATE : {
                              MAP : 0
                          },
                          FAULT_STATE : {
                             MAP : 0
                          }
                       });
                    mapToggleOff.publish(mapOff);
                   }
                }

                function toggleStatesen(sen){
                   if(sen.className == "on") {
                       sen.className="off";
                      var senToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var senOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              SENSING : 1
                          },
                          ENABLED_STATE : {
                             SENSING : 1
                          },
                          ENGAGED_STATE : {
                              SENSING : 1
                          },
                          FAULT_STATE : {
                              SENSING : 1
                          }
                       });
                    senToggleOn.publish(senOn);
                   } else {
                       sen.className="on";
                      var senToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var senOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              SENSING : 0
                          },
                          ENABLED_STATE : {
                              SENSING : 0
                          },
                          ENGAGED_STATE : {
                              SENSING : 0
                          },
                          FAULT_STATE : {
                              SENSING : 0
                          }
                       });
                    senToggleOff.publish(senOff);
                   }
                }

                function toggleStateloc(loc){
                   if(loc.className == "on") {
                       loc.className="off";
                      var locToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var locOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              LOCALIZATION : 1
                          },
                          ENABLED_STATE : {
                              LOCALIZATION: 1
                          },
                          ENGAGED_STATE : {
                              LOCALIZATION : 1
                          },
                          FAULT_STATE : {
                              LOCALIZATION : 1
                          }
                       });
                    locToggleOn.publish(locOn);
                   } else {
                       loc.className="on";
                      var locToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var locOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              LOCALIZATION : 0
                          },
                          ENABLED_STATE : {
                              LOCALIZATION : 0
                          },
                          ENGAGED_STATE : {
                              LOCALIZATION : 0
                          },
                          FAULT_STATE : {
                              LOCALIZATION : 0
                          }
                       });
                    locToggleOff.publish(locOff);
                   }
                }
                function toggleStatefloc(floc){
                   if(floc.className == "on") {
                      floc.className="off";
                      var flocToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var flocOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                             FAKE_LOCALIZATION : 1
                          },
                          ENABLED_STATE : {
                              FAKE_LOCALIZATION: 1
                          },
                          ENGAGED_STATE : {
                             FAKE_LOCALIZATION : 1
                          },
                          FAULT_STATE : {
                              FAKE_LOCALIZATION : 1
                          }
                       });
                    flocToggleOn.publish(flocOn);
                   } else {
                       floc.className="on";
                      var flocToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var flocOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              FAKE_LOCALIZATION: 0
                          },
                          ENABLED_STATE : {
                              FAKE_LOCALIZATION : 0
                          },
                          ENGAGED_STATE : {
                              FAKE_LOCALIZATION : 0
                          },
                          FAULT_STATE : {
                              FAKE_LOCALIZATION: 0
                          }
                       });
                    flocToggleOff.publish(flocOff);
                   }
                }
                function toggleStatedet(det){
                   if(det.className == "on") {
                       det.className="off";
                      var detToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var detOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              DETECTION : 1
                          },
                          ENABLED_STATE : {
                             DETECTION : 1
                          },
                          ENGAGED_STATE : {
                              DETECTION : 1
                          },
                          FAULT_STATE : {
                              DETECTION : 1
                          }
                       });
                    detToggleOn.publish(detOn);
                   } else {
                       det.className="on";
                      var detToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var detOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              DETECTION : 0
                          },
                          ENABLED_STATE : {
                              DETECTION : 0
                          },
                          ENGAGED_STATE : {
                              DETECTION : 0
                          },
                          FAULT_STATE : {
                              DETECTION : 0
                          }
                       });
                    detToggleOff.publish(detOff);
                   }
                }
                function toggleStatemip(mission){
                   if(mission.className == "on") {
                       mission.className="off";
                      var mipToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var mipOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              MISSION_PLANNING : 1
                          },
                          ENABLED_STATE : {
                              MISSION_PLANNING : 1
                          },
                          ENGAGED_STATE : {
                              MISSION_PLANNING : 1
                          },
                          FAULT_STATE : {
                              MISSION_PLANNING : 1
                          }
                       });
                    mipToggleOn.publish(mipOn);
                   } else {
                       mission.className="on";
                      var mipToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var mipOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              MISSION_PLANNING : 0
                          },
                          ENABLED_STATE : {
                              MISSION_PLANNING : 0
                          },
                          ENGAGED_STATE : {
                              MISSION_PLANNING : 0
                          },
                          FAULT_STATE : {
                              MISSION_PLANNING : 0
                          }
                       });
                    mipToggleOff.publish(mipOff);
                   }
                }
                function toggleStatemop(motion){
                   if(motion.className == "on") {
                       motion.className="off";
                      var mopToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var mopOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              MOTION_PLANNING : 1
                          },
                          ENABLED_STATE : {
                              MOTION_PLANNING : 1
                          },
                          ENGAGED_STATE : {
                              MOTION_PLANNING : 1
                          },
                          FAULT_STATE : {
                              MOTION_PLANNING : 1
                          }
                       });
                    mopToggleOn.publish(mopOn);
                   } else {
                       motion.className="on";
                      var mopToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var mopOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              MOTION_PLANNING : 0
                          },
                          ENABLED_STATE : {
                              MOTION_PLANNING: 0
                          },
                          ENGAGED_STATE : {
                              MOTION_PLANNING : 0
                          },
                          FAULT_STATE : {
                              MOTION_PLANNING : 0
                          }
                       });
                    mopToggleOff.publish(mopOff);
                   }
                }
                function toggleStateswit(swit){
                   if(swit.className == "on") {
                       swit.className="off";
                      var switToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var switOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              SWITCH : 1
                          },
                          ENABLED_STATE : {
                              SWITCH : 1
                          },
                          ENGAGED_STATE : {
                              SWITCH : 1
                          },
                          FAULT_STATE : {
                              SWITCH : 1
                          }
                       });
                    switToggleOn.publish(switOn);
                   } else {
                       swit.className="on";
                      var switToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var switOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              SWITCH : 0
                          },
                          ENABLED_STATE : {
                              SWITCH : 0
                          },
                          ENGAGED_STATE : {
                              SWITCH : 0
                          },
                          FAULT_STATE : {
                              SWITCH : 0
                          }
                       });
                    switToggleOff.publish(switOff);
                   }
                }
                function toggleStatessmp(ssmp){
                   if(ssmp.className == "on") {
                       ssmp.className="off";
                      var ssmpToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var ssmpOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              SSMP : 1
                          },
                          ENABLED_STATE : {
                              SSMP : 1
                          },
                          ENGAGED_STATE : {
                              SSMP : 1
                          },
                          FAULT_STATE : {
                              SSMP : 1
                          }
                       });
                    ssmpToggleOn.publish(ssmpOn);
                   } else {
                       ssmp.className="on";
                      var ssmpToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var ssmpOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                             SSMP : 0
                          },
                          ENABLED_STATE : {
                              SSMP: 0
                          },
                          ENGAGED_STATE : {
                              SSMP : 0
                          },
                          FAULT_STATE : {
                              SSMP : 0
                          }
                       });
                    ssmpToggleOff.publish(ssmpOff);
                   }
                }
                function toggleStaterviz(rviz){
                   if(rviz.className == "on") {
                       rviz.className="off";
                      var rvizToggleOn = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var rvizOn = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              RVIZ : 1
                          },
                          ENABLED_STATE : {
                              RVIZ : 1
                          },
                          ENGAGED_STATE : {
                              RVIZ : 1
                          },
                          FAULT_STATE : {
                              RECORDING : 1
                          }
                       });
                    rvizToggleOn.publish(rvizOn);
                   } else {
                       rviz.className="on";
                      var rvizToggleOff = new ROSLIB.Topic({
                         ros : ros,
                         name : '/feature_state',
                         messageType : 'Int32MultiArray'
                       });

                      var rvizOff = new ROSLIB.Message({
                          INITIALIZING_STATE : {
                              RVIZ : 0
                          },
                          ENABLED_STATE : {
                              RVIZ : 0
                          },
                          ENGAGED_STATE : {
                              RVIZ : 0
                          },
                          FAULT_STATE : {
                              RVIZ : 0
                          }
                       });
                    rvizToggleOff.publish(rvizOff);
                   }
               }
//-------------------- Feature Change---------------

//-----------------feature state-----------------
                var feature_listener = new ROSLIB.Topic({
                  ros : ros,
                  name : '/feature_state',
                  messageType : 'Int32MultiArray'
                });

                feature_listener.subscribe(function(message) {

                    var position;

                    i_r=message.INITIALIZING_STATE.RECORDING;
                    i_m=message.INITIALIZING_STATE.MAP;
                    i_s=message.INITIALIZING_STATE.SENSING;
                    i_l=message.INITIALIZING_STATE.LOCALIZATION;
                    i_f=message.INITIALIZING_STATE.FAKE_LOCALIZATION;
                    i_d=message.INITIALIZING_STATE.DETECTION;
                    i_mip=message.INITIALIZING_STATE.MISSION_PLANNING;
                    i_mop=message.INITIALIZING_STATE.MOTION_PLANNING;
                    i_sw=message.INITIALIZING_STATE.SWITCH;
                    i_ss=message.INITIALIZING_STATE.SSMP;
                    i_rv=message.INITIALIZING_STATE.RVIZ;

                    enab_r=message.ENABLED_STATE.RECORDING;
                    enab_m=message.ENABLED_STATE.MAP;
                    enab_s=message.ENABLED_STATE.SENSING;
                    enab_l=message.ENABLED_STATE.LOCALIZATION;
                    enab_f=message.ENABLED_STATE.FAKE_LOCALIZATION;
                    enab_d=message.ENABLED_STATE.DETECTION;
                    enab_mip=message.ENABLED_STATE.MISSION_PLANNING;
                    enab_mop=message.ENABLED_STATE.MOTION_PLANNING;
                    enab_sw=message.ENABLED_STATE.SWITCH;
                    enab_ss=message.ENABLED_STATE.SSMP;
                    enab_rv=message.ENABLED_STATE.RVIZ;

                    eng_r=message.ENGAGED_STATE.RECORDING;
                    eng_m=message.ENGAGED_STATE.MAP;
                    eng_s=message.ENGAGED_STATE.SENSING;
                    eng_l=message.ENGAGED_STATE.LOCALIZATION;
                    eng_f=message.ENGAGED_STATE.FAKE_LOCALIZATION;
                    eng_d=message.ENGAGED_STATE.DETECTION;
                    eng_mip=message.ENGAGED_STATE.MISSION_PLANNING;
                    eng_mop=message.ENGAGED_STATE.MOTION_PLANNING;
                    eng_sw=message.ENGAGED_STATE.SWITCH;
                    eng_ss=message.ENGAGED_STATE.SSMP;
                    eng_rv=message.ENGAGED_STATE.RVIZ;


                    f_r=message.FAULT_STATE.RECORDING;
                    f_m=message.FAULT_STATE.MAP;
                    f_s=message.FAULT_STATE.SENSING;
                    f_l=message.FAULT_STATE.LOCALIZATION;
                    f_f=message.FAULT_STATE.FAKE_LOCALIZATION;
                    f_d=message.FAULT_STATE.DETECTION;
                    f_mip=message.FAULT_STATE.MISSION_PLANNING;
                    f_mop=message.FAULT_STATE.MOTION_PLANNING;
                    f_sw=message.FAULT_STATE.SWITCH;
                    f_ss=message.FAULT_STATE.SSMP;
                    f_rv=message.FAULT_STATE.RVIZ;

                    if((i_r==1)||(enab_r==1)||(eng_r)||(f_r==1))
                    {
                        position=0;
                    }
                    if((i_m==1)||(enab_m==1)||(eng_m==1)(f_m==1))
                    {
                        position=1;
                    }
                    if((i_s==1)||(enab_s==1)||(eng_s==1)(f_s==1))
                    {
                        position=2;
                    }
                    if((i_l==1)||(enab_l==1)||(eng_l==1)(f_l==1))
                    {
                        position=3;
                    }
                    if((i_f==1)||(enab_f==1)||(eng_f==1)(f_f==1))
                    {
                        position=4;
                    }
                    if((i_d==1)||(enab_d==1)||(eng_d==1)(f_d==1))
                    {
                        position=5;
                    }
                    if((i_mip==1)||(enab_mip==1)||(eng_mip==1)(f_mip==1))
                    {
                        position=6;
                    }
                    if((i_mop==1)||(enab_mop==1)||(eng_mop==1)(f_mop==1))
                    {
                        position=7;
                    }
                    if((i_sw==1)||(enab_sw==1)||(eng_sw==1)(f_sw==1))
                    {
                        position=8;
                    }
                    if((i_ss==1)||(enab_ss==1)||(eng_ss==1)(f_ss==1))
                    {
                        position=9;
                    }
                    if((i_rv==1)||(enab_rv==1)||(eng_rv==1)(f_rv==1))
                    {
                        position=10;
                    }


                  // array for 11 ledsx
                    var strColorPairs = Array(
                                                {'position' : 0, 'color' : 'green'},
                                                {'position' : 1, 'color' : 'green'},
                                                {'position' : 2, 'color' : 'green'},
                                                {'position' : 3, 'color' : 'green'},
                                                {'position' : 4, 'color' : 'green'},
                                                {'position' : 5, 'color' : 'green'},
                                                {'position' : 6, 'color' : 'green'},
                                                {'position' : 7, 'color' : 'green'},
                                                {'position' : 8, 'color' : 'green'},
                                                {'position' : 9, 'color' : 'green'},
                                                {'position' :10, 'color' : 'green'}
                                            );


                    colorBox(position);
                    //function to change the color of leds and reseting it to gray when not in use
                     function colorBox(position)
                        {
                            var divList = document.getElementsByClassName('ratingBox');
                            var i, n = divList.length;
                            curContent = divList[position].id;
                            for (i=0; i<n; i++)
                            {

                                for (j=0; j<strColorPairs.length; j++)
                                {
                                    if (strColorPairs[j].position == curContent){
                                        divList[curContent].style.backgroundColor  = strColorPairs[j].color;
                                        }
                                    else {divList[i].style.backgroundColor  = 'gray'}
                                }
                            }
                        }


                });


//-----------------feature state-----------------



         </script>

         <!-- define on/off styles -->
         <style type="text/css">
          .on  { background:red; }
          .off { background:green; }
         </style>

</head>


<body class="d-flex flex-column h-100">
	<!-- header of the page -->
	<header class="header">
		<div class="container">
			<div class="jumbotron text-center">
				<h1>AD-EYE Graphical Interface</h1>
				<p>Connection status: <span id="status"></span></p>
			</div>
		</div>
	</header>

	<!-- main content -->
	<main>
		<div class="container">
			<div class="row">
                <!-- card for linear velocity -->
                <div class="col-md-4 col-sm-12">
                    <div class="card">
                        <div class="card-body">
                            <h2 class="text-center">Linear Velocity</h2>
                            <div class="gauge">
                                <div class="gauge__body">
                                    <div class="gauge__fill"></div>
                                    <div class="gauge__cover"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- card for linear acceleration -->
				<div class="col-md-4 col-sm-12">
					<div class="card">
						<div class="card-body">
							<h2 class="text-center">Linear Acceleration</h2>
                            <div class="gauge_a">
                                <div class="gauge_a__body">
                                    <div class="gauge_a__fill"></div>
                                    <div class="gauge_a__cover"></div>
                                </div>
                            </div>
						</div>
					</div>
				</div>
                <!-- card for state -->
                <div class="col-md-4 col-sm-12">
					<div class="card">
						<div class="card-body">
							<h2 class="text-center">Autoware Vs Safety</h2>
                            <div id="0" class="ratingBox">
                            </div>
                            <p>Autoware</p>
                            <div id="1" class="ratingBox">
                            </div>
                            <p>Safety Channel</p>
                            <h2 class="text-center">Toggle State</h2>
                            <button type="button" class="off"
                             onclick="toggleState(this)">A Vs S</button>
						</div>
					</div>
				</div>
                <div class="col-md-4 col-sm-12">
					<div class="card">
						<div class="card-body">
							<h2 class="text-center">Manager State</h2>
                            <p>State : <span id="state"></span></p>
                            <button type="button" class="off"
                             onclick="toggleStateinitial(this)">Initial</button>
                             <button type="button"  class="off"
                              onclick="toggleStateactivation(this)">Activation</button>
                             <button type="button" class="off"
                              onclick="toggleStatefault(this)">Fault</button>
						</div>
					</div>
				</div>
                <!-- card for tracked objects -->
                <div class="col-md-4 col-sm-12">
					<div class="card">
						<div class="card-body">
							<h2 class="text-center">Tracked Objects</h2>
                            <p>Tracked object: <span id="track"></span></p>
                            <p>X: <span id="x"></span></p>
                            <p>Y: <span id="y"></span></p>
                            <p>Z: <span id="z"></span></p>
						</div>
					</div>
				</div>
                <!-- card for behaviour state -->
                <div class="col-md-4 col-sm-12">
					<div class="card">
						<div class="card-body">
							<h2 class="text-center">Behavior State</h2>
                            <p>State: <span id="beh"></span></p>
						</div>
					</div>
				</div>
                <div class="col-md-4 col-sm-12">
                    <div class="card">
                        <div class="card-body">
                            <h2 class="text-center">Feature State</h2>
                            <div id="0" class="ratingBoxs">
                            </div>
                            <button type="button" class="off" style="height:50px;width:300px"
                             onclick="toggleStaterec(this)">RECORDING</button>
                            <div id="1" class="ratingBoxs">
                            </div>
                            <button type="button"  class="off" style="height:50px;width:300px"
                             onclick="toggleStatemap(this)">MAP</button>
                            <div id="2" class="ratingBoxs">
                            </div>
                            <button type="button" class="off" style="height:50px;width:300px"
                             onclick="toggleStatesen(this)">SENSING</button>
                            <div id="3" class="ratingBoxs">
                            </div>
                            <button type="button" class="off" style="height:50px;width:300px"
                             onclick="toggleStateloc(this)">LOCALIZATION</button>
                            <div id="4" class="ratingBoxs">
                            </div>
                            <button type="button"  class="off" style="height:50px;width:300px"
                             onclick="toggleStatefloc(this)">FAKE_LOCALIZATION</button>
                            <div id="5" class="ratingBoxs">
                            </div>
                            <button type="button" class="off" style="height:50px;width:300px"
                             onclick="toggleStatedet(this)">DETECTION</button>
                            <div id="6" class="ratingBoxs">
                            </div>
                            <button type="button" class="off" style="height:50px;width:300px"
                             onclick="toggleStatemip(this)">MISSION_PLANNING</button>
                            <div id="7" class="ratingBoxs">
                            </div>
                            <button type="button"  class="off" style="height:50px;width:300px"
                             onclick="toggleStatemop(this)">MOTION_PLANNING</button>
                            <div id="8" class="ratingBoxs">
                            </div>
                            <button type="button" class="off" style="height:50px;width:300px"
                             onclick="toggleStateswit(this)">SWITCH</button>
                            <div id="9" class="ratingBoxs">
                            </div>
                            <button type="button" class="off" style="height:50px;width:300px"
                             onclick="toggleStatessmp(this)">SSMP</button>
                            <div id="10" class="ratingBoxs">
                            </div>
                            <button type="button"  class="off" style="height:50px;width:300px"
                             onclick="toggleStaterviz(this)">RVIZ</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-12">
					<div class="card">
						<div class="card-body">
							<h2 class="text-center">Camera Stream_tl</h2>

						</div>
					</div>
				</div>

            </div>
	</main>

	<!-- footer -->
	<footer class="footer mt-auto bg-dark text-light">
		<div class="container">
			<h5>page ends here! But work inprogress</h5>
		</div>
	</footer>
</body>


</html>
