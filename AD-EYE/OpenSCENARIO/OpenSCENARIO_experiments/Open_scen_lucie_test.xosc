<?xml version="1.0" encoding="utf-8"?>
<OpenSCENARIO>
    
<FileHeader revMajor="0" revMinor="9" date="2020-08-04T15:00:00" description="Sample Scenario - Double Lane Changer" author="Lucie Mosnier"/>

<ParameterDeclaration/>

<Catalogs>
    <VehicleCatalog>
        <Directory path="Catalogs/VehicleCatalogs"/>
    </VehicleCatalog>
    <DriverCatalog>
        <Directory path="Catalogs/DriverCatalogs"/>
    </DriverCatalog>
    <PedestrianCatalog>
        <Directory path="Catalogs/ObserverCatalogs"/>
    </PedestrianCatalog>
    <PedestrianControllerCatalog>
        <Directory path="Catalogs/PedestrianCatalogs"/>
    </PedestrianControllerCatalog>
    <MiscObjectCatalog>
        <Directory path="Catalogs/MiscObjectCatalogs"/>
    </MiscObjectCatalog>
    <EnvironmentCatalog>
        <Directory path="Catalogs/EnvironmentCatalogs"/>
    </EnvironmentCatalog>
    <ManeuverCatalog>
        <Directory path="Catalogs/ManeuverCatalogs"/>
    </ManeuverCatalog>
    <TrajectoryCatalog>
        <Directory path="Catalogs/TrajectoryCatalog"/>
    </TrajectoryCatalog>
    <RouteCatalog>
        <Directory path="Catalogs/RoutingCatalog"/>
    </RouteCatalog>
</Catalogs>

<RoadNetwork>
    <Logics filepath="SampleDatabase_01.xodr"/>
    <SceneGraph filepath="SampleDatabase_01.opt.osgb"/>
</RoadNetwork>

<Global>
	<SetEnvironment>
		<TargetProperties>
			<Lidar>
				<TargetPropertySettings ObjectType = "Car" ReflectionPercentage = "[5,5,10]" />
			</Lidar>
		</TargetProperties>
	</SetEnvironment>
</Global>

<Entities>
    <Object name="Ego">
        <CatalogReference catalogName="VechicleCatalog" entryName="AudiA3_blue_147kW"/>
        <Controller>
            <CatalogReference catalogName="DriverCatalog" entryName="DefaultDriver"/>
        </Controller>
    </Object>
    
        <Object name="Man_200_1">
        <CatalogReference catalogName="PedestrianCatalog" entryName="AudiA4_red_147kW"/>
        <Controller>
            <CatalogReference catalogName="DriverCatalog" entryName="DefaultDriver"/>
        </Controller>
    </Object>
	
	<Object name="Audi_A8_Sedan_1">
        <CatalogReference catalogName="PedestrianCatalog" entryName="AudiA4_red_147kW"/>
        <Controller>
            <CatalogReference catalogName="DriverCatalog" entryName="DefaultDriver"/>
        </Controller>
    </Object>
    
        
</Entities>

<Storyboard>
    <Init>
        <Actions>
            <Private object="Ego">
                <Action>
                    <Longitudinal>
                        <Speed>
                            <Dynamics shape="step"/>
                            <Target>
                                <Absolute value="50"/>
                            </Target>
                        </Speed>
                    </Longitudinal>
                </Action>
                <Action>
                    <Position>
                        <World x="18.476554870605469" y="31.928745269775391" z="0.68999999761581421" h="0*pi/180" p="0" r="0"/> 
                    </Position>
                </Action>
            </Private>
            
                   <Private object="Man_200_1">
                <Action>
                    <Longitudinal>
                        <Speed>
                            <Dynamics shape="step"/>
                            <Target>
                                <Absolute value="0"/>
                            </Target>
                        </Speed>
                    </Longitudinal>
                </Action>
                <Action>
                    <Position>
                        <World x="26.074188232421875" y="53.983161926269531" z="0" h="0*pi/180" p="0" r="0"/>
                    </Position>
                </Action>
            </Private>
			
					<Private object="Audi_A8_Sedan_1">
                <Action>
                    <Longitudinal>
                        <Speed>
                            <Dynamics shape="step"/>
                            <Target>
                                <Absolute value="[30,10,50]"/>
                            </Target>
                        </Speed>
                    </Longitudinal>
                </Action>
                <Action>
                    <Position>
                        <World x="33.763862193268835" y="15.845094981313935" z="0.550000011920929" h="89.999998051501677*pi/180" p="0" r="0"/>
                    </Position>
                </Action>
            </Private>

        </Actions>
    </Init>
    
    
    <Story name="TrajStory" owner="Audi_A8_Sedan_1">
        <Act name = "MyAct">
			<Sequence name = "MySequence" numberOfExecutions = "1">
				<Actors>
					<Entity name = "Audi_A8_Sedan_1"/>
				</Actors>
				<Maneuver name ="FollowTrajManeuver">
					<Event name = "FollowTrajEvent" priority = "overwrite">
						<Action name ="FollowTrajAction" >
							<Private>
								<!-- <Routing>
									<FollowTrajectory>
										<CatalogReference catalogName="Lucie_Trajectory" entryName="LittleTrajectory"/>
										<Longitudinal>
											<None/>
										</Longitudinal>
										<Lateral purpose="steering"/>
									</FollowTrajectory>
								</Routing> -->
								<Longitudinal>
                                    <Speed>
                                        <Dynamics shape="sinusoidal" time="1"/>
                                        <Target>
                                            <Relative object="Ego" value="3"/>
                                        </Target>
                                    </Speed>
                                </Longitudinal>
							</Private>
						</Action>
						<Conditions>
							<StartConditions>
								<ConditionGroup>
									<Condition name="MyStartCondition" delay="0" edge="rising">
										<ByState>
											<AtStart type="act" name="MyAct"/>
										</ByState>
									</Condition>
								</ConditionGroup>
							</StartConditions>
						</Conditions>
					</Event>
				</Maneuver>
			</Sequence>
			<Conditions>
				<Start>
					<ConditionGroup>
						<Condition name ="" delay="0" edge="rising">
							<ByValue>
								<SimulationTime value="0" rule="equal-to"/>
							</ByValue>
						</Condition>
					</ConditionGroup>
				</Start>
			</Conditions>
		</Act>
			
    </Story>
	
	
	
    <End>
	</End>
</Storyboard>

</OpenSCENARIO>
