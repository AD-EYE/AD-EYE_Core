<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AD-EYE: GridMapCreator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AD-EYE
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">AD-EYE: Automated Driving simulations</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classGridMapCreator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">GridMapCreator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="classGridMapCreator.html" title="The GridMapCreator maintains a grid map used to know where safe places are. ">GridMapCreator</a> maintains a grid map used to know where safe places are.  
 <a href="classGridMapCreator.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5df28e4b4af91aa6b0b11bca03264062"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGridMapCreator.html#a5df28e4b4af91aa6b0b11bca03264062">GridMapCreator</a> (ros::NodeHandle &amp;nh, const float area_width, const float area_height_front, const float area_height_back)</td></tr>
<tr class="memdesc:a5df28e4b4af91aa6b0b11bca03264062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a5df28e4b4af91aa6b0b11bca03264062">More...</a><br /></td></tr>
<tr class="separator:a5df28e4b4af91aa6b0b11bca03264062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b4b8966d53d30fad9ceca477690f452"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGridMapCreator.html#a5b4b8966d53d30fad9ceca477690f452">position_callback</a> (const nav_msgs::Odometry::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:a5b4b8966d53d30fad9ceca477690f452"><td class="mdescLeft">&#160;</td><td class="mdescRight">Position Callback : Called when the position information has changed.  <a href="#a5b4b8966d53d30fad9ceca477690f452">More...</a><br /></td></tr>
<tr class="separator:a5b4b8966d53d30fad9ceca477690f452"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ed1c6283cdc380092e1fdeee372341b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGridMapCreator.html#a3ed1c6283cdc380092e1fdeee372341b">DynamicObjects_callback</a> (const geometry_msgs::PoseArray::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:a3ed1c6283cdc380092e1fdeee372341b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamic Objects Callback : Called when the position of the dynamic objects has changed.  <a href="#a3ed1c6283cdc380092e1fdeee372341b">More...</a><br /></td></tr>
<tr class="separator:a3ed1c6283cdc380092e1fdeee372341b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7a6dbee626737eddbfc91681d6730a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGridMapCreator.html#af7a6dbee626737eddbfc91681d6730a5">run</a> ()</td></tr>
<tr class="memdesc:af7a6dbee626737eddbfc91681d6730a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main function of the Node. Contains the main loop.  <a href="#af7a6dbee626737eddbfc91681d6730a5">More...</a><br /></td></tr>
<tr class="separator:af7a6dbee626737eddbfc91681d6730a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af222d2b22ad9d566c35383dafa056d3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGridMapCreator.html#af222d2b22ad9d566c35383dafa056d3e">initializeGridMap</a> ()</td></tr>
<tr class="memdesc:af222d2b22ad9d566c35383dafa056d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initialize the GridMap with the static entities.  <a href="#af222d2b22ad9d566c35383dafa056d3e">More...</a><br /></td></tr>
<tr class="separator:af222d2b22ad9d566c35383dafa056d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0a7d37228e112102174dcf0629a95a2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGridMapCreator.html#ad0a7d37228e112102174dcf0629a95a2">checkFile</a> (float resolution, std::string pexFileLocation)</td></tr>
<tr class="memdesc:ad0a7d37228e112102174dcf0629a95a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method checks if a .csv file is provided for the given resolution.  <a href="#ad0a7d37228e112102174dcf0629a95a2">More...</a><br /></td></tr>
<tr class="separator:ad0a7d37228e112102174dcf0629a95a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9548502241b075beaa07b23c95428711"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGridMapCreator.html#a9548502241b075beaa07b23c95428711">readFile</a> (std::string filePath)</td></tr>
<tr class="memdesc:a9548502241b075beaa07b23c95428711"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function read a .csv containing the staticObjects layer values and build this layer with these.  <a href="#a9548502241b075beaa07b23c95428711">More...</a><br /></td></tr>
<tr class="separator:a9548502241b075beaa07b23c95428711"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539fd0f37ec502def07c5cd2d83402eb"><td class="memItemLeft" align="right" valign="top">grid_map::Polygon&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGridMapCreator.html#a539fd0f37ec502def07c5cd2d83402eb">rectangle_creator</a> (float X, float Y, float length, float width, float angle)</td></tr>
<tr class="memdesc:a539fd0f37ec502def07c5cd2d83402eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function creates a rectangle in a gridmap.  <a href="#a539fd0f37ec502def07c5cd2d83402eb">More...</a><br /></td></tr>
<tr class="separator:a539fd0f37ec502def07c5cd2d83402eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="classGridMapCreator.html" title="The GridMapCreator maintains a grid map used to know where safe places are. ">GridMapCreator</a> maintains a grid map used to know where safe places are. </p>
<p>A submap is sent to the flattening node which build a occupancy grid map for the Safety channel to know where are the safe places (for an emergency stop). The submap is aligned by design with the global axis of the map. So the submap sent to the flatening node is a square that contains the rectangle representing the final occmap </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5df28e4b4af91aa6b0b11bca03264062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5df28e4b4af91aa6b0b11bca03264062">&#9670;&nbsp;</a></span>GridMapCreator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">GridMapCreator::GridMapCreator </td>
          <td>(</td>
          <td class="paramtype">ros::NodeHandle &amp;&#160;</td>
          <td class="paramname"><em>nh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>area_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>area_height_front</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const float&#160;</td>
          <td class="paramname"><em>area_height_back</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nh</td><td>A reference to the ros::NodeHandle initialized in the main function. </td></tr>
    <tr><td class="paramname">area_width</td><td>The width in meter of the ssmp occupancy area </td></tr>
    <tr><td class="paramname">area_height_front</td><td>The distance in meter in front of the base_link point that remains in the ssmp occmap area </td></tr>
    <tr><td class="paramname">area_height_back</td><td>The distance in meter behind the base_link point that remains in the ssmp occmap area</td></tr>
  </table>
  </dd>
</dl>
<p>Initializes the node and its components such as publishers and subscribers. The area related parameters needs to be given as command line arguments to the node (order : width, height_front, height_back) </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad0a7d37228e112102174dcf0629a95a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0a7d37228e112102174dcf0629a95a2">&#9670;&nbsp;</a></span>checkFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string GridMapCreator::checkFile </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>resolution</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>pexFileLocation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method checks if a .csv file is provided for the given resolution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resolution</td><td>The resolution the file should match </td></tr>
    <tr><td class="paramname">pexFileLocation</td><td>The location of the .pexFile </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The filePath of the right file (empty if not found)</dd></dl>
<p>In the case a UserLibrary Element is found on the map, this function will be called in order to check if a .csv file describing the Elements footprint is given. The file name should contain the resolution without decimal mark preceded by an underscore (e.g. Map_025.csv for a resolution of 0.25 m/cell). Then, it uses the pex file location to go to the right folder (which is hardcoded as &lt;ExperimentFolder&gt;/staticObjects) </p>

</div>
</div>
<a id="a3ed1c6283cdc380092e1fdeee372341b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ed1c6283cdc380092e1fdeee372341b">&#9670;&nbsp;</a></span>DynamicObjects_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GridMapCreator::DynamicObjects_callback </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::PoseArray::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dynamic Objects Callback : Called when the position of the dynamic objects has changed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A smart pointer to the message from the topic.</td></tr>
  </table>
  </dd>
</dl>
<p>Stores the array of poses as read out from simulink of all the non controlled actors. </p>

</div>
</div>
<a id="af222d2b22ad9d566c35383dafa056d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af222d2b22ad9d566c35383dafa056d3e">&#9670;&nbsp;</a></span>initializeGridMap()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GridMapCreator::initializeGridMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function initialize the GridMap with the static entities. </p>
<p>First, the vector map is read from the .csv found within the parameters Then, the size of the map is extracted and the map can be initialized. The .pex file is read in order to parse environment and infrastructure elements. And the map is completed after with the roads read from the vector map. </p>

</div>
</div>
<a id="a5b4b8966d53d30fad9ceca477690f452"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b4b8966d53d30fad9ceca477690f452">&#9670;&nbsp;</a></span>position_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GridMapCreator::position_callback </td>
          <td>(</td>
          <td class="paramtype">const nav_msgs::Odometry::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Position Callback : Called when the position information has changed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>A smart pointer to the message from the topic.</td></tr>
  </table>
  </dd>
</dl>
<p>Stores the position information as read from simulink of the controlled car </p>

</div>
</div>
<a id="a9548502241b075beaa07b23c95428711"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9548502241b075beaa07b23c95428711">&#9670;&nbsp;</a></span>readFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GridMapCreator::readFile </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>filePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function read a .csv containing the staticObjects layer values and build this layer with these. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filePath</td><td>The path to the file to read</td></tr>
  </table>
  </dd>
</dl>
<p>It extracts the data from the file and put it first in an occupandyGrid. Then, it converts the occupancyGrid to a GridMap and finally, add the data from the GridMap newly created inside the world GridMap. </p>

</div>
</div>
<a id="a539fd0f37ec502def07c5cd2d83402eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a539fd0f37ec502def07c5cd2d83402eb">&#9670;&nbsp;</a></span>rectangle_creator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">grid_map::Polygon GridMapCreator::rectangle_creator </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function creates a rectangle in a gridmap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">X</td><td>X coordinate of the center location in the gridmap. </td></tr>
    <tr><td class="paramname">Y</td><td>Y coordinate of the center location in the gridmap. </td></tr>
    <tr><td class="paramname">length</td><td>Length of the rectangle. </td></tr>
    <tr><td class="paramname">width</td><td>Width of the rectangle. </td></tr>
    <tr><td class="paramname">angle</td><td>The amount of tilt. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A rectangle created corresponding to the given parameters</dd></dl>
<p>This function is especially used to creates car footprint. </p>

</div>
</div>
<a id="af7a6dbee626737eddbfc91681d6730a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7a6dbee626737eddbfc91681d6730a5">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GridMapCreator::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The main function of the Node. Contains the main loop. </p>
<p>Basically, updates the gridmap with the position of the dynamic objects, and then, publish. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/akanshu/AD-EYE_Core/AD-EYE/ROS_Packages/src/AD-EYE/src/<a class="el" href="GridMapCreator__node_8cpp.html">GridMapCreator_node.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
